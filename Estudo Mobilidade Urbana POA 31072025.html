<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador Interativo de Mobilidade Pessoal - Porto Alegre</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover, .nav-link.active {
            color: #0891b2; 
            border-bottom-color: #0891b2;
        }
        .profile-btn.active {
            background-color: #0891b2;
            color: white;
            border-color: #0891b2;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <!-- Chosen Palette: Warm Neutrals (Slate) with Cyan Accent -->
    <!-- Application Structure Plan: A task-oriented, single-page application designed to answer the user's key questions directly. The structure abandons the linear report format in favor of interactive sections: 1) A visual comparison of all transport modes ('Comparar Modais'). 2) An interactive TCO calculator ('Custo do Carro') for deep financial analysis. 3) A profile-based recommender ('Meu Perfil') for personalized advice. This user-centric design prioritizes quick access to relevant information and tools, enhancing usability and decision-making efficiency. Navigation is handled by a sticky header, allowing seamless movement between these analytical tools. -->
    <!-- Visualization & Content Choices: 
        - Report Info: General comparison of transport modes -> Goal: Compare options across qualitative/quantitative criteria -> Viz/Method: Interactive Horizontal Bar Chart (Chart.js) -> Interaction: Hover tooltips for detailed values -> Justification: Excellent for comparing categories and their trade-offs (cost vs. convenience).
        - Report Info: Total Cost of Ownership (TCO) breakdown -> Goal: Show the composition of total cost -> Viz/Method: Dynamic Donut Chart (Chart.js) -> Interaction: Chart updates in real-time based on user input from the calculator form -> Justification: Powerfully illustrates the impact of "hidden" costs like depreciation, a core message of the source report.
        - Report Info: User profiles/scenarios -> Goal: Present relatable use cases and targeted advice -> Viz/Method: Interactive content cards with a tab-like button interface (HTML/CSS/JS) -> Interaction: Clicking a profile button reveals the corresponding analysis -> Justification: Allows users to self-identify and receive tailored recommendations without reading through irrelevant scenarios.
        - Report Info: Intercity travel cost comparison -> Goal: Provide a concrete cost analysis for a common use case -> Viz/Method: Clear, static HTML table -> Interaction: None -> Justification: A table is the most direct and clear format for presenting this specific set of numerical data.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-cyan-700">Mobilidade POA</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#comparar-modais" class="nav-link px-3 py-2 text-sm font-medium text-slate-600 border-b-2 border-transparent">Comparar Modais</a>
                        <a href="#custo-carro" class="nav-link px-3 py-2 text-sm font-medium text-slate-600 border-b-2 border-transparent">Custo do Carro</a>
                        <a href="#meu-perfil" class="nav-link px-3 py-2 text-sm font-medium text-slate-600 border-b-2 border-transparent">Meu Perfil</a>
                        <a href="#conclusao" class="nav-link px-3 py-2 text-sm font-medium text-slate-600 border-b-2 border-transparent">Conclus√£o</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <section class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4">Sua Mobilidade, Sua Escolha.</h2>
            <p class="max-w-3xl mx-auto text-lg text-slate-600">Uma an√°lise interativa para ajudar voc√™ a navegar pelas op√ß√µes de transporte em Porto Alegre e tomar a decis√£o mais inteligente para o seu bolso e seu estilo de vida.</p>
        </section>

        <section id="comparar-modais" class="mb-20 scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">Comparativo Geral dos Modais</h3>
                <p class="mt-2 text-md text-slate-500">Cada op√ß√£o de transporte possui um balan√ßo √∫nico entre custo, conveni√™ncia e flexibilidade. Esta se√ß√£o oferece uma vis√£o geral para ajudar a entender os pontos fortes e fracos de cada modal, permitindo uma compara√ß√£o inicial r√°pida e eficaz antes de aprofundar a an√°lise.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <div class="chart-container mx-auto h-96 md:h-[450px]">
                    <canvas id="modalsChart"></canvas>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mt-12">
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">üöç Transporte P√∫blico</h4>
                        <p class="text-sm text-slate-600">Imbat√≠vel no custo para rotinas di√°rias. Com tarifa subsidiada de R$ 5,00, o custo mensal para quem trabalha presencialmente √© de R$ 220. √â a base para uma mobilidade econ√¥mica, mas com baixa flexibilidade de rotas e hor√°rios.</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">üì± Apps de Transporte</h4>
                        <p class="text-sm text-slate-600">M√°xima conveni√™ncia porta a porta, mas com custos vari√°veis e imprevis√≠veis. Ideal para usos pontuais e para cobrir lacunas do transporte p√∫blico, n√£o como solu√ß√£o principal para o dia a dia, pois o custo pode quadruplicar em rela√ß√£o ao √¥nibus.</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">üöó Aluguel e Assinatura</h4>
                        <p class="text-sm text-slate-600">A flexibilidade do carro sem os custos e a complexidade da posse. O aluguel √© perfeito para viagens. A assinatura (a partir de ~R$ 1.840/m√™s) √© uma alternativa direta √† compra, cobrindo seguro, IPVA e manuten√ß√£o.</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">üöò Carro Pr√≥prio</h4>
                        <p class="text-sm text-slate-600">Oferece autonomia total, mas √© a op√ß√£o com maior Custo Total de Propriedade (TCO), envolvendo deprecia√ß√£o, impostos, seguro e manuten√ß√£o. A decis√£o de compra deve ir al√©m do custo do trajeto di√°rio.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="custo-carro" class="mb-20 scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">Calculadora: O Custo Real do Seu Carro</h3>
                 <p class="mt-2 text-md text-slate-500">O pre√ßo na etiqueta √© apenas o come√ßo. Use esta ferramenta para calcular o Custo Total de Propriedade (TCO) de um ve√≠culo. Insira os dados para visualizar uma estimativa realista dos gastos mensais e anuais, incluindo custos "invis√≠veis" como a deprecia√ß√£o, que √© uma das maiores despesas.</p>
            </div>
            <div class="grid lg:grid-cols-5 gap-8 bg-white p-6 rounded-xl shadow-lg">
                <div class="lg:col-span-2 space-y-4">
                    <div>
                        <label for="vehiclePrice" class="block text-sm font-medium text-slate-700">Valor do Ve√≠culo (R$)</label>
                        <input type="number" id="vehiclePrice" value="85000" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="annualMileage" class="block text-sm font-medium text-slate-700">Quilometragem Anual (km)</label>
                        <input type="number" id="annualMileage" value="15000" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="fuelConsumption" class="block text-sm font-medium text-slate-700">Consumo (km/L ou km/kWh)</label>
                        <input type="number" id="fuelConsumption" value="13" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="fuelPrice" class="block text-sm font-medium text-slate-700">Pre√ßo Combust√≠vel/Energia (R$/L ou R$/kWh)</label>
                        <input type="number" id="fuelPrice" value="6.35" step="0.01" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500 sm:text-sm">
                    </div>
                     <div>
                        <label for="insuranceCost" class="block text-sm font-medium text-slate-700">Seguro Anual (R$)</label>
                        <input type="number" id="insuranceCost" value="2400" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="garageCost" class="block text-sm font-medium text-slate-700">Garagem Mensal (R$)</label>
                        <input type="number" id="garageCost" value="150" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500 sm:text-sm">
                    </div>
                </div>
                <div class="lg:col-span-3 flex flex-col items-center justify-center">
                    <div class="chart-container w-full h-64 md:h-80">
                        <canvas id="tcoChart"></canvas>
                    </div>
                    <div class="mt-6 text-center">
                        <p class="text-slate-600">Custo Mensal Estimado:</p>
                        <p class="text-4xl font-bold text-cyan-600" id="monthlyCostResult">R$ 0,00</p>
                        <p class="text-slate-500 text-sm mt-1">Custo Anual: <span id="annualCostResult">R$ 0,00</span></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="meu-perfil" class="mb-20 scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">Qual √© o seu Perfil de Mobilidade?</h3>
                <p class="mt-2 text-md text-slate-500">Sua rotina e suas necessidades de vida s√£o os fatores mais importantes na escolha do transporte ideal. Selecione o perfil que mais se aproxima da sua realidade para ver uma an√°lise e recomenda√ß√£o de estrat√©gia de mobilidade, baseada nos cen√°rios estudados no relat√≥rio.</p>
            </div>
            <div class="flex justify-center space-x-2 md:space-x-4 mb-8">
                <button data-profile="solteiro" class="profile-btn active text-sm md:text-base px-4 py-2 font-semibold border-2 border-slate-300 rounded-full transition">Profissional Solteiro</button>
                <button data-profile="casal" class="profile-btn text-sm md:text-base px-4 py-2 font-semibold border-2 border-slate-300 rounded-full transition">Casal sem Filhos</button>
                <button data-profile="familia" class="profile-btn text-sm md:text-base px-4 py-2 font-semibold border-2 border-slate-300 rounded-full transition">Fam√≠lia com Filhos</button>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg min-h-[280px]">
                <div id="profile-solteiro" class="profile-content">
                    <h4 class="text-2xl font-bold mb-3">Cen√°rio A: O Profissional Solteiro Urbano</h4>
                    <p class="text-slate-600 mb-4">Reside em √°rea central, com bom acesso a transporte p√∫blico para o trabalho. A rotina √© previs√≠vel e o carro ficaria ocioso a maior parte do tempo.</p>
                    <h5 class="font-semibold mb-2">Estrat√©gia Recomendada: Mobilidade H√≠brida</h5>
                    <ul class="list-disc list-inside text-slate-600 space-y-1">
                        <li><span class="font-medium">Base:</span> Transporte p√∫blico para o trajeto di√°rio (custo fixo ~R$220/m√™s).</li>
                        <li><span class="font-medium">Conveni√™ncia:</span> Apps de transporte para sa√≠das noturnas ou emerg√™ncias.</li>
                        <li><span class="font-medium">Lazer:</span> Aluguel de carro pontual para viagens de fim de semana.</li>
                    </ul>
                </div>
                <div id="profile-casal" class="profile-content hidden">
                    <h4 class="text-2xl font-bold mb-3">Cen√°rio B: O Casal sem Filhos</h4>
                    <p class="text-slate-600 mb-4">Rotina mista com home office e deslocamentos, al√©m de necessidade de carro para compras e visitas a familiares em outras cidades.</p>
                    <h5 class="font-semibold mb-2">Estrat√©gia Recomendada: Flexibilidade como Servi√ßo ou Posse Inteligente</h5>
                    <ul class="list-disc list-inside text-slate-600 space-y-1">
                        <li><span class="font-medium">Op√ß√£o 1 (Sem preocupa√ß√£o):</span> Assinatura de carro. Custo mensal fixo com tudo incluso (seguro, IPVA, manuten√ß√£o), oferecendo a conveni√™ncia de um carro sempre dispon√≠vel.</li>
                        <li><span class="font-medium">Op√ß√£o 2 (Menor Custo a Longo Prazo):</span> Compra de um seminovo confi√°vel (1 a 3 anos de uso) via cons√≥rcio ou √† vista para evitar juros altos.</li>
                    </ul>
                </div>
                <div id="profile-familia" class="profile-content hidden">
                    <h4 class="text-2xl font-bold mb-3">Cen√°rio C: A Fam√≠lia com Filhos</h4>
                    <p class="text-slate-600 mb-4">Rotina log√≠stica complexa, envolvendo escola, atividades extracurriculares e viagens em fam√≠lia. A necessidade de flexibilidade, seguran√ßa e capacidade de carga √© alta.</p>
                    <h5 class="font-semibold mb-2">Estrat√©gia Recomendada: Propriedade Justificada</h5>
                    <ul class="list-disc list-inside text-slate-600 space-y-1">
                        <li><span class="font-medium">Necessidade:</span> O carro particular torna-se quase indispens√°vel para a gest√£o da rotina familiar. O Custo Total de Propriedade se justifica pela utilidade e qualidade de vida.</li>
                        <li><span class="font-medium">Foco da Decis√£o:</span> A escolha se concentra em novo vs. seminovo e, crucialmente, no m√©todo de aquisi√ß√£o.</li>
                        <li><span class="font-medium text-red-600">Alerta Financeiro:</span> Evitar financiamentos com juros altos √© a prioridade para n√£o comprometer o or√ßamento familiar. Planejar a compra via cons√≥rcio ou √† vista √© a estrat√©gia mais s√≥lida.</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section id="conclusao" class="scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">Conclus√£o: Construindo sua Estrat√©gia Pessoal</h3>
                <p class="mt-2 text-md text-slate-500">N√£o existe uma resposta √∫nica. A decis√£o mais inteligente raramente √© escolher um √∫nico meio de transporte, mas sim combinar as ferramentas certas para cada necessidade. Esta se√ß√£o resume as recomenda√ß√µes finais para uma mobilidade eficiente e financeiramente saud√°vel.</p>
            </div>
            <div class="bg-white p-8 rounded-xl shadow-lg">
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-cyan-100 mb-4">
                           <span class="text-2xl">üí∞</span>
                        </div>
                        <h4 class="text-lg font-semibold">A Base √© P√∫blica</h4>
                        <p class="mt-1 text-slate-600">Para a rotina di√°ria, o transporte p√∫blico √© a op√ß√£o mais econ√¥mica e racional. Use-o como a funda√ß√£o da sua mobilidade.</p>
                    </div>
                    <div class="text-center">
                        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-cyan-100 mb-4">
                            <span class="text-2xl">‚ö°Ô∏è</span>
                        </div>
                        <h4 class="text-lg font-semibold">A Conveni√™ncia √© Sob Demanda</h4>
                        <p class="mt-1 text-slate-600">Use apps de transporte de forma estrat√©gica para situa√ß√µes pontuais, como emerg√™ncias ou sa√≠das noturnas, sem comprometer seu or√ßamento.</p>
                    </div>
                    <div class="text-center">
                        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-cyan-100 mb-4">
                            <span class="text-2xl">üîë</span>
                        </div>
                        <h4 class="text-lg font-semibold">A Regra de Ouro Financeira</h4>
                        <p class="mt-1 text-slate-600">Se precisar de um carro, o m√©todo de compra √© crucial. Evite financiamentos com juros altos. Planeje-se para um cons√≥rcio ou compra √† vista.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-white mt-20">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-sm text-slate-400">
            <p>Analisador Interativo de Mobilidade Pessoal. Dados e an√°lises baseados no relat√≥rio de mobilidade para Porto Alegre.</p>
            <p>&copy; 2025. Ferramenta criada para fins de demonstra√ß√£o e aux√≠lio √† decis√£o.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const modalsData = {
                labels: ['Transporte P√∫blico', 'Apps de Transporte', 'Assinatura de Carro', 'Carro Pr√≥prio'],
                datasets: [
                    {
                        label: 'Custo Mensal Estimado (0-5)',
                        data: [0.5, 3, 4, 5],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Conveni√™ncia (0-5)',
                        data: [1, 5, 4.5, 5],
                        backgroundColor: 'rgba(255, 159, 64, 0.6)',
                        borderColor: 'rgba(255, 159, 64, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Flexibilidade (0-5)',
                        data: [1, 4, 5, 5],
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }
                ]
            };

            const modalsCtx = document.getElementById('modalsChart').getContext('2d');
            new Chart(modalsCtx, {
                type: 'bar',
                data: modalsData,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 5,
                            title: { display: true, text: 'Pontua√ß√£o (0 a 5)' }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Avalia√ß√£o Comparativa de Modais de Transporte'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x.toFixed(1);
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            const tcoCtx = document.getElementById('tcoChart').getContext('2d');
            let tcoChart;

            const vehiclePriceInput = document.getElementById('vehiclePrice');
            const annualMileageInput = document.getElementById('annualMileage');
            const fuelConsumptionInput = document.getElementById('fuelConsumption');
            const fuelPriceInput = document.getElementById('fuelPrice');
            const insuranceCostInput = document.getElementById('insuranceCost');
            const garageCostInput = document.getElementById('garageCost');

            const monthlyCostResultEl = document.getElementById('monthlyCostResult');
            const annualCostResultEl = document.getElementById('annualCostResult');

            function formatCurrency(value) {
                return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            }

            function calculateAndDisplayTCO() {
                const price = parseFloat(vehiclePriceInput.value) || 0;
                const mileage = parseFloat(annualMileageInput.value) || 0;
                const consumption = parseFloat(fuelConsumptionInput.value) || 1;
                const fuelPrice = parseFloat(fuelPriceInput.value) || 0;
                const insurance = parseFloat(insuranceCostInput.value) || 0;
                const garage = parseFloat(garageCostInput.value) * 12 || 0;

                const depreciationRate = 0.15;
                const maintenanceRate = 0.015; 

                const annualDepreciation = price * depreciationRate;
                const annualIpva = price * 0.03; 
                const annualLicensing = 109.27;
                const annualFuelCost = (mileage / consumption) * fuelPrice;
                const annualMaintenance = price * maintenanceRate + (mileage / 10000) * 370;

                const annualTotalCost = annualDepreciation + annualIpva + annualLicensing + insurance + garage + annualFuelCost + annualMaintenance;
                const monthlyTotalCost = annualTotalCost / 12;

                monthlyCostResultEl.textContent = formatCurrency(monthlyTotalCost);
                annualCostResultEl.textContent = formatCurrency(annualTotalCost);

                updateTCOChart({
                    depreciation: annualDepreciation,
                    ipvaLicensing: annualIpva + annualLicensing,
                    insuranceGarage: insurance + garage,
                    fuel: annualFuelCost,
                    maintenance: annualMaintenance,
                });
            }

            function updateTCOChart(costs) {
                if (tcoChart) {
                    tcoChart.destroy();
                }

                const data = {
                    labels: ['Deprecia√ß√£o', 'Impostos e Taxas', 'Seguro e Garagem', 'Combust√≠vel/Energia', 'Manuten√ß√£o'],
                    datasets: [{
                        data: [costs.depreciation, costs.ipvaLicensing, costs.insuranceGarage, costs.fuel, costs.maintenance],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }]
                };

                tcoChart = new Chart(tcoCtx, {
                    type: 'doughnut',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12,
                                    padding: 15
                                }
                            },
                            title: {
                                display: true,
                                text: 'Composi√ß√£o do Custo Anual do Ve√≠culo'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        const value = context.raw;
                                        label += formatCurrency(value);
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            [vehiclePriceInput, annualMileageInput, fuelConsumptionInput, fuelPriceInput, insuranceCostInput, garageCostInput].forEach(input => {
                input.addEventListener('input', calculateAndDisplayTCO);
            });

            calculateAndDisplayTCO();

            const profileButtons = document.querySelectorAll('.profile-btn');
            const profileContents = document.querySelectorAll('.profile-content');

            profileButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetProfile = button.dataset.profile;

                    profileButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    profileContents.forEach(content => {
                        if (content.id === `profile-${targetProfile}`) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });

            const navLinks = document.querySelectorAll('nav a');
            const sections = document.querySelectorAll('main section');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === current) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>

